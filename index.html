<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guild Glory Bot Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0d1117; color: #c9d1d9; font-family: 'Segoe UI', sans-serif; }
        .glass { background: #161b22; border: 1px solid #30363d; border-radius: 15px; }
        .btn-red { background: linear-gradient(90deg, #f85149, #d73a49); color: white; font-weight: bold; width: 100%; padding: 12px; border-radius: 10px; transition: 0.3s; }
        .input-box { background: #010409; border: 1px solid #30363d; color: white; padding: 12px; width: 100%; border-radius: 8px; outline: none; }
        .hidden { display: none; }
    </style>
</head>
<body class="p-4 max-w-md mx-auto">

    <div id="authPage">
        <h1 class="text-3xl font-black text-center text-red-500 mb-8 italic uppercase">Guild Glory</h1>
        <div class="glass p-6" id="loginBox">
            <h2 class="text-xl font-bold mb-4">Login</h2>
            <input type="text" id="loginUser" class="input-box mb-3" placeholder="Username">
            <input type="password" id="loginPass" class="input-box mb-4" placeholder="Password">
            <button onclick="handleLogin()" class="btn-red">LOGIN</button>
            <p class="text-center text-xs mt-6">New User? <button onclick="toggleAuth(true)" class="text-red-400 font-bold underline">Sign Up</button></p>
        </div>

        <div class="glass p-6 hidden" id="signupBox">
            <h2 class="text-xl font-bold mb-4">Create Account</h2>
            <input type="text" id="regUser" class="input-box mb-3" placeholder="Choose Username">
            <input type="password" id="regPass" class="input-box mb-4" placeholder="Create Password">
            <button onclick="handleSignup()" class="btn-red bg-blue-600">REGISTER</button>
            <button onclick="toggleAuth(false)" class="w-full mt-4 text-xs text-gray-500 underline">Back to Login</button>
        </div>
    </div>

    <div id="homePage" class="hidden">
        <div class="flex justify-between items-center mb-6">
            <div>
                <h2 class="text-lg font-bold text-red-400 italic">Hi, <span id="userDisplayName">User</span>!</h2>
                <button onclick="logout()" class="text-[10px] text-gray-500 underline">Logout Account</button>
            </div>
            <div class="bg-yellow-500 text-black px-4 py-2 rounded-lg font-black shadow-lg">ğŸª™ <span id="userBalance">0</span></div>
        </div>

        <div class="glass p-5 mb-6">
            <h3 class="text-xs font-bold text-gray-400 uppercase mb-4">ğŸš€ Bot Control</h3>
            <input type="number" id="guildId" class="input-box mb-3" placeholder="Enter Guild ID">
            <select id="server" class="input-box mb-3">
                <option>India ğŸ‡®ğŸ‡³</option><option>Pakistan ğŸ‡µğŸ‡°</option><option>Bangladesh ğŸ‡§ğŸ‡©</option><option>Singapore ğŸ‡¸ğŸ‡¬</option>
                <option>Brazil ğŸ‡§ğŸ‡·</option><option>Indonesia ğŸ‡®ğŸ‡©</option><option>Vietnam ğŸ‡»ğŸ‡³</option><option>Europe ğŸ‡ªğŸ‡º</option>
                <option>Middle East ğŸŒ</option><option>Thailand ğŸ‡¹ğŸ‡­</option>
            </select>
            <select id="gloryPlan" class="input-box mb-4">
                <option value="50">15,000 Glory (50 Coins)</option>
                <option value="100">30,000 Glory (100 Coins)</option>
                <option value="150">45,000 Glory (150 Coins)</option>
                <option value="500">100,000 Glory (500 Coins)</option>
            </select>
            <div id="botStatus" class="hidden text-center text-xs text-yellow-500 mb-3 animate-pulse">Bot is processing your order...âš¡</div>
            <button id="runBtn" onclick="runBot()" class="btn-red italic">RUN BOT NOW</button>
            <button id="stopBtn" onclick="stopBot()" class="hidden w-full bg-gray-700 py-3 rounded-lg font-bold">STOP BOT</button>
            <p id="botNotice" class="hidden text-[10px] text-center text-red-500 mt-2 italic">âš ï¸ Order active. Once stopped, you cannot run this order again.</p>
        </div>

        <div class="glass p-5 mb-6">
            <h3 class="text-xs font-bold text-yellow-500 uppercase mb-4">ğŸ’° Buy Coins</h3>
            <div class="grid grid-cols-2 gap-2 mb-4">
                <button onclick="payRedirect(10)" class="glass p-2 text-[10px] hover:bg-white/5">â‚¹10 (100 C)</button>
                <button onclick="payRedirect(20)" class="glass p-2 text-[10px] hover:bg-white/5">â‚¹20 (200 C)</button>
                <button onclick="payRedirect(50)" class="glass p-2 text-[10px] hover:bg-white/5">â‚¹50 (500 C)</button>
                <button onclick="payRedirect(100)" class="glass p-2 text-[10px] hover:bg-white/5">â‚¹100 (1000 C)</button>
            </div>
            <p class="text-[10px] text-gray-500 mb-2">After PhonePe payment, upload screenshot:</p>
            <input type="file" id="payProof" class="text-[10px] mb-3">
            <button onclick="submitAdminRequest('Payment')" class="w-full bg-yellow-600 text-black py-2 rounded-lg font-bold text-xs uppercase">Submit to Admin</button>
        </div>

        <div class="glass p-5 mb-6">
            <h3 class="text-xs font-bold text-blue-400 uppercase mb-4">ğŸ Free Rewards</h3>
            <div class="space-y-2 mb-4">
                <div class="flex justify-between items-center text-xs bg-black p-2 rounded">
                    <span>Subscribe YouTube (+10C)</span>
                    <a href="https://youtube.com/@bhaktinaadam-h2b" target="_blank" class="text-red-500 underline font-bold">Open</a>
                </div>
                <div class="flex justify-between items-center text-xs bg-black p-2 rounded">
                    <span>Follow Instagram (+10C)</span>
                    <a href="https://www.instagram.com/mani_king_1432_" target="_blank" class="text-pink-500 underline font-bold">Open</a>
                </div>
            </div>
            <input type="file" id="rewardProof" class="text-[10px] mb-2">
            <button onclick="submitAdminRequest('Reward')" class="w-full bg-blue-600 py-2 rounded-lg font-bold text-xs">CLAIM REWARD</button>
        </div>

        <div class="text-center space-y-4">
            <p class="text-[10px] text-gray-500 uppercase">Users Active: <span class="text-white font-bold">1,248</span></p>
            <a href="https://wa.me/919618301782" class="text-green-500 text-xs font-bold italic underline">Contact WhatsApp: 9618301782</a>
        </div>
    </div>

    <div id="adminPage" class="hidden">
        <h2 class="text-2xl font-black text-yellow-500 mb-6 uppercase">Admin Panel</h2>
        <div id="requestList" class="space-y-4"></div>
        <button onclick="location.reload()" class="w-full mt-10 text-xs text-gray-500 underline">Exit Admin</button>
    </div>

    <script>
        // Database logic
        const getDB = () => JSON.parse(localStorage.getItem('guildUsers')) || {};
        const saveDB = (db) => localStorage.setItem('guildUsers', JSON.stringify(db));
        const getReqs = () => JSON.parse(localStorage.getItem('adminReqs')) || [];
        const saveReqs = (r) => localStorage.setItem('adminReqs', JSON.stringify(r));

        let currentSession = localStorage.getItem('userSession');

        window.onload = () => { if(currentSession) showHome(currentSession); };

        function toggleAuth(isSignup) {
            document.getElementById('loginBox').classList.toggle('hidden', isSignup);
            document.getElementById('signupBox').classList.toggle('hidden', !isSignup);
        }

        function handleSignup() {
            const u = document.getElementById('regUser').value.trim();
            const p = document.getElementById('regPass').value.trim();
            if(!u || !p) return alert("Fill details!");
            let db = getDB();
            if(db[u]) return alert("Username taken!");
            db[u] = { pass: p, balance: 0 };
            saveDB(db);
            alert("Registered! Now login.");
            toggleAuth(false);
        }

        function handleLogin() {
            const u = document.getElementById('loginUser').value.trim();
            const p = document.getElementById('loginPass').value.trim();
            let db = getDB();
            if(db[u] && db[u].pass === p) {
                localStorage.setItem('userSession', u);
                showHome(u);
            } else alert("Invalid credentials!");
        }

        function showHome(u) {
            currentSession = u;
            const db = getDB();
            document.getElementById('userDisplayName').innerText = u;
            document.getElementById('userBalance').innerText = db[u].balance;
            document.getElementById('authPage').classList.add('hidden');
            document.getElementById('homePage').classList.remove('hidden');
        }

        function payRedirect(amt) {
            window.location.href = `upi://pay?pa=9618301782@fam&pn=Mani&am=${amt}&cu=INR`;
        }

        function submitAdminRequest(type) {
            let r = getReqs();
            r.push({ user: currentSession, type: type, status: 'pending', id: Date.now() });
            saveReqs(r);
            alert("Request sent to Admin Mani!");
        }

        function runBot() {
            const plan = parseInt(document.getElementById('gloryPlan').value);
            let db = getDB();
            if(db[currentSession].balance < plan) return alert("Low Coins!");
            db[currentSession].balance -= plan;
            saveDB(db);
            document.getElementById('userBalance').innerText = db[currentSession].balance;
            document.getElementById('runBtn').classList.add('hidden');
            document.getElementById('stopBtn').classList.remove('hidden');
            document.getElementById('botStatus').classList.remove('hidden');
            document.getElementById('botNotice').classList.remove('hidden');
        }

        function stopBot() {
            document.getElementById('stopBtn').classList.add('hidden');
            document.getElementById('botStatus').innerText = "Bot Stopped. Success! âœ…";
            document.getElementById('botStatus').classList.replace('text-yellow-500', 'text-green-500');
        }

        // Secret Admin Entry (Mani Password Protected)
        window.ondblclick = () => {
            const p = prompt("Enter Admin Password:");
            if(p === "mani147369000") {
                document.getElementById('homePage').classList.add('hidden');
                document.getElementById('adminPage').classList.remove('hidden');
                renderAdmin();
            }
        };

        function renderAdmin() {
            const list = document.getElementById('requestList');
            list.innerHTML = '';
            getReqs().forEach(req => {
                list.innerHTML += `<div class="glass p-4 text-xs flex justify-between items-center">
                    <div>User: ${req.user}<br>Type: ${req.type}</div>
                    <button onclick="approveReq(${req.id})" class="bg-green-600 px-3 py-1 rounded">Approve</button>
                </div>`;
            });
        }

        function approveReq(id) {
            let reqs = getReqs();
            const req = reqs.find(r => r.id === id);
            let db = getDB();
            db[req.user].balance += 100; // Giving 100 for example
            saveDB(db);
            saveReqs(reqs.filter(r => r.id !== id));
            renderAdmin();
            alert("Approved!");
        }

        function logout() { localStorage.removeItem('userSession'); location.reload(); }
    </script>
</body>
</html>
